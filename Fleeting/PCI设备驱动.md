# 虚拟地址 物理地址 总线地址
虚拟地址是通过了操作系统内存管理单元映射之后的地址。
物理地址是站在cpu角度看到的外设资源的地址。

对于cpu来说，不管是设备直接挂接在cpu本地总线还是通过pci总线挂接，cpu去访问这个设备都是通过物理地址，这个物理地址就是本地总线的地址。**pci总线上的设备需要将自己的资源映射到本地总线，这样cpu直接去访问这个地址就可以访问到pci设备的资源。** pci控制器就实现了这个地址的转换，pci控制器有mem地址窗口，对于pci设备，配置空间的BAR0～5就说明了设备资源的偏移和大小，pci设备资源基于pci地址窗口的偏移就是cpu访问设备资源的本地总线地址了。

PCI设备缓存 & DMA 

驱动通过配置设备DMA，将内存映射到PCI总线地址，物理地址
